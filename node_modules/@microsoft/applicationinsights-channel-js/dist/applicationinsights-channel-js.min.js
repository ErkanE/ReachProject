/*!
 * Application Insights JavaScript SDK - Channel, 2.6.5
 * Copyright (c) Microsoft and contributors. All rights reserved.
 */
var e=this,t=function(e){"use strict";var o="function",s="object",_="undefined",r="prototype",i="hasOwnProperty",n=Object,l=n[r],t=n.assign,a=n.create,u=n.defineProperty,c=l[i];function d(){return typeof globalThis!==_&&globalThis?globalThis:typeof self!==_&&self?self:typeof window!==_&&window?window:typeof global!==_&&global?global:null}function f(e){throw new TypeError(e)}(d()||{}).Symbol,(d()||{}).Reflect;var p=t||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])l[i].call(t,a)&&(e[a]=t[a]);return e},g=function(e,t){return(g=n.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t[i](n)&&(e[n]=t[n])})(e,t)};function h(e,t){function n(){this.constructor=e}typeof t!==o&&null!==t&&f("Class extends value "+t+" is not a constructor or null"),g(e,t),e[r]=null===t?function(e){if(a)return a(e);if(null==e)return{};var t=typeof e;function n(){}return t!==s&&t!==o&&f("Object prototype may only be an Object:"+e),n[r]=e,new n}(t):(n[r]=t[r],new n)}var N,m="constructor",v="prototype",y="function",I="_dynInstFuncs",C="_isDynProxy",S="_dynClass",T="_dynInstChk",w=T,x="_dfOpts",b="_unknown_",A="__proto__",E="useBaseInst",R="setInstFuncs",L=Object,F=L.getPrototypeOf,M=0;function P(e,t){return e&&L[v].hasOwnProperty.call(e,t)}function D(e){return e&&(e===L[v]||e===Array[v])}function B(e){return D(e)||e===Function[v]}function k(e){if(e){if(F)return F(e);if(e=e[A]||e[v]||(e[m]?e[m][v]:null))return e}return null}function O(e,t){var n=[],r=L.getOwnPropertyNames;if(r)n=r(e);else for(var a in e)"string"==typeof a&&P(e,a)&&n.push(a);if(n&&0<n.length)for(var i=0;i<n.length;i++)t(n[i])}function U(e,t,n){return t!==m&&typeof e[t]===y&&(n||P(e,t))}function j(e){throw new TypeError("DynamicProto: "+e)}function z(e,t){for(var n=e.length-1;0<=n;n--)if(e[n]===t)return 1}function G(e,t){return P(e,v)?e.name||t||b:((e||{})[m]||{}).name||t||b}function K(e,r,t,n){P(e,v)||j("theClass is an invalid class definition.");var a=e[v];!function(e){if(F)for(var t=[],n=k(r);n&&!B(n)&&!z(t,n);){if(n===e)return 1;t.push(n),n=k(n)}}(a)&&j("["+G(e)+"] is not in class hierarchy of ["+G(r)+"]");var i=null;P(a,S)?i=a[S]:(i="_dynCls$"+G(e,"_")+"$"+M,M++,a[S]=i);var o=K[x],s=!!o[E];s&&n&&n[E]!==undefined&&(s=!!n[E]);var l,u,c,d,f,p,e=(u={},O(l=r,function(e){!u[e]&&U(l,e,!1)&&(u[e]=l[e])}),u);t(r,function(e,t,n,i){function r(e,t,n){var r,a=t[n];return a[C]&&i&&!1!==(r=e[I]||{})[w]&&(a=(r[t[S]]||{})[n]||a),function(){return a.apply(e,arguments)}}var a={};O(n,function(e){a[e]=r(t,n,e)});for(var o=k(e),s=[];o&&!B(o)&&!z(s,o);)O(o,function(e){!a[e]&&U(o,e,!F)&&(a[e]=r(t,o,e))}),s.push(o),o=k(o);return a}(a,r,e,s)),o=!!F&&!!o[R],c=a,i=i,d=r,f=e,n=!1!==(o=o&&n?!!n[R]:o),D(c)||(o=d[I]=d[I]||{},p=o[i]=o[i]||{},!1!==o[w]&&(o[w]=!!n),O(d,function(e){var n,r,a;U(d,e,!1)&&d[e]!==f[e]&&(p[e]=d[e],delete d[e],P(c,e)&&(!c[e]||c[e][C])||(c[e]=(n=c,r=e,(a=function(){var e,t;return(function(e,t,n,r){var a=null;if(e&&P(n,S)){var i=e[I]||{};if((a=(i[n[S]]||{})[t])||j("Missing ["+t+"] "+y),!a[T]&&!1!==i[w]){for(var o=!P(e,t),s=k(e),l=[];o&&s&&!B(s)&&!z(l,s);){var u=s[t];if(u){o=u===r;break}l.push(s),s=k(s)}try{o&&(e[t]=a),a[T]=1}catch(c){i[w]=!1}}}return a}(this,r,n,a)||(typeof(t=(t=n[e=r])===a?k(n)[e]:t)!==y&&j("["+e+"] is not a "+y),t)).apply(this,arguments)})[C]=1,a)))}))}K[x]={setInstFuncs:!0,useBaseInst:!0},(Et=N=N||{})[Et.CRITICAL=1]="CRITICAL",Et[Et.WARNING=2]="WARNING";var V={BrowserDoesNotSupportLocalStorage:0,BrowserCannotReadLocalStorage:1,BrowserCannotReadSessionStorage:2,BrowserCannotWriteLocalStorage:3,BrowserCannotWriteSessionStorage:4,BrowserFailedRemovalFromLocalStorage:5,BrowserFailedRemovalFromSessionStorage:6,CannotSendEmptyTelemetry:7,ClientPerformanceMathError:8,ErrorParsingAISessionCookie:9,ErrorPVCalc:10,ExceptionWhileLoggingError:11,FailedAddingTelemetryToBuffer:12,FailedMonitorAjaxAbort:13,FailedMonitorAjaxDur:14,FailedMonitorAjaxOpen:15,FailedMonitorAjaxRSC:16,FailedMonitorAjaxSend:17,FailedMonitorAjaxGetCorrelationHeader:18,FailedToAddHandlerForOnBeforeUnload:19,FailedToSendQueuedTelemetry:20,FailedToReportDataLoss:21,FlushFailed:22,MessageLimitPerPVExceeded:23,MissingRequiredFieldSpecification:24,NavigationTimingNotSupported:25,OnError:26,SessionRenewalDateIsZero:27,SenderNotInitialized:28,StartTrackEventFailed:29,StopTrackEventFailed:30,StartTrackFailed:31,StopTrackFailed:32,TelemetrySampledAndNotSent:33,TrackEventFailed:34,TrackExceptionFailed:35,TrackMetricFailed:36,TrackPVFailed:37,TrackPVFailedCalc:38,TrackTraceFailed:39,TransmissionFailed:40,FailedToSetStorageBuffer:41,FailedToRestoreStorageBuffer:42,InvalidBackendResponse:43,FailedToFixDepricatedValues:44,InvalidDurationValue:45,TelemetryEnvelopeInvalid:46,CreateEnvelopeError:47,CannotSerializeObject:48,CannotSerializeObjectNonSerializable:49,CircularReferenceDetected:50,ClearAuthContextFailed:51,ExceptionTruncated:52,IllegalCharsInName:53,ItemNotInArray:54,MaxAjaxPerPVExceeded:55,MessageTruncated:56,NameTooLong:57,SampleRateOutOfRange:58,SetAuthContextFailed:59,SetAuthContextFailedAccountName:60,StringValueTooLong:61,StartCalledMoreThanOnce:62,StopCalledWithoutStart:63,TelemetryInitializerFailed:64,TrackArgumentsNotSpecified:65,UrlTooLong:66,SessionStorageBufferFull:67,CannotAccessCookie:68,IdTooLong:69,InvalidEvent:70,FailedMonitorAjaxSetRequestHeader:71,SendBrowserInfoOnUserInit:72,PluginException:73,NotificationException:74,SnippetScriptLoadFailure:99,InvalidInstrumentationKey:100,CannotParseAiBlobValue:101,InvalidContentBlob:102,TrackPageActionEventFailed:103},q="attachEvent",W="addEventListener",H="detachEvent",X="removeEventListener",Y=u;function J(e){return l.toString.call(e)}function Z(e){return e===undefined||typeof e===_}function $(e){return null===e||Z(e)}function Q(e){return typeof e===s}function ee(e){return typeof e===o}function te(e,t,n,r){void 0===r&&(r=!1);var a=!1;if(!$(e))try{$(e[W])?$(e[q])||(e[q]("on"+t,n),a=!0):(e[W](t,n,r),a=!0)}catch(i){}return a}function ne(e,t,n,r){if(void 0===r&&(r=!1),!$(e))try{$(e[X])?$(e[H])||e[H]("on"+t,n):e[X](t,n,r)}catch(a){}}function re(e,t){if(e)for(var n in e)c.call(e,n)&&t.call(e,n,e[n])}function ae(e,t){return e&&t&&~e.indexOf(t)}function ie(e){return"[object Array]"===J(e)}function oe(e){return"[object Error]"===J(e)}function se(e){return"string"==typeof e}function le(e){if("[object Date]"===J(e)){var t=function(e){return 1===(e=""+e).length?"0"+e:e};return e.getUTCFullYear()+"-"+t(1+e.getUTCMonth())+"-"+t(e.getUTCDate())+"T"+t(e.getUTCHours())+":"+t(e.getUTCMinutes())+":"+t(e.getUTCSeconds())+"."+(""+(e.getUTCMilliseconds()/1e3).toFixed(3)).slice(2,5)+"Z"}}function ue(e,t,n){for(var r=e.length,a=0;a<r&&!(a in e&&-1===t.call(n||e,e[a],a,e));a++);}function ce(e,t,n){for(var r=e.length,a=n||e,i=Array(r),o=0;o<r;o++)o in e&&(i[o]=t.call(a,e[o],e));return i}function de(e){return"string"!=typeof e?e:e.replace(/^\s+|\s+$/g,"")}var fe=!{toString:null}.propertyIsEnumerable("toString"),pe=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"];function ge(e){var t=typeof e;t===o||t===s&&null!==e||f("objKeys called on non-object");var n,r=[];for(n in e)e&&c.call(e,n)&&r.push(n);if(fe)for(var a=pe.length,i=0;i<a;i++)e&&c.call(e,pe[i])&&r.push(pe[i]);return r}function he(){var e=Date;return e.now?e.now():(new e).getTime()}function me(e){return oe(e)?e.name:""}function ve(e,t,n,r,a){var i=n;return e&&((i=e[t])===n||a&&!a(i)||r&&!r(n)||(e[t]=i=n)),i}function ye(e){return!!e}function Ie(e){return e&&n(t?t({},e):e)}var Ce="window",Se="navigator",Te="JSON",we="trident/";function xe(e){var t=d();return t&&t[e]?t[e]:e===Ce&&be()?window:null}function be(){return typeof window===s&&window}function _e(){return be()?window:xe(Ce)}function Ne(){return typeof document===s&&document?document:xe("document")}function Ae(){return typeof navigator===s&&navigator?navigator:xe(Se)}function Ee(){return typeof JSON===s&&JSON||null!==xe(Te)}function Re(){return Ee()?JSON||xe(Te):null}function Le(e){var t=Object[r].toString.call(e),n="";return"[object Error]"===t?n="{ stack: '"+e.stack+"', message: '"+e.message+"', name: '"+e.name+"'":Ee()&&(n=Re().stringify(e)),t+n}function Fe(e){return e?'"'+e.replace(/\"/g,"")+'"':""}var Me=(Pe.dataType="MessageData",Pe);function Pe(e,t,n,r){void 0===n&&(n=!1),this.messageId=e,this.message=(n?"AI: ":"AI (Internal): ")+e,e="",Ee()&&(e=Re().stringify(r)),e=(t?" message:"+Fe(t):"")+(r?" props:"+Fe(e):""),this.message+=e}function De(e,t){return(e||{}).logger||new Be(t)}var Be=function wr(n){this.identifier="DiagnosticLogger",this.queue=[];var a=0,o={};K(wr,this,function(i){function e(e,t){return $(e=n[e])?t:e}$(n)&&(n={}),i.consoleLoggingLevel=function(){return e("loggingLevelConsole",0)},i.telemetryLoggingLevel=function(){return e("loggingLevelTelemetry",1)},i.maxInternalMessageLimit=function(){return e("maxMessageLimit",25)},i.enableDebugExceptions=function(){return e("enableDebugExceptions",!1)},i.throwInternal=function(e,t,n,r,a){if(n=new Me(t,n,a=void 0!==a&&a,r),i.enableDebugExceptions())throw n;Z(n.message)||(r=i.consoleLoggingLevel(),a?(a=+n.messageId,!o[a]&&r>=N.WARNING&&(i.warnToConsole(n.message),o[a]=!0)):r>=N.WARNING&&i.warnToConsole(n.message),i.logInternalMessage(e,n))},i.warnToConsole=function(e){var t,n=typeof console!==_?console:xe("console");n&&(t="log",ee(n[t=n.warn?"warn":t])&&n[t](e))},i.resetInternalMessageCount=function(){a=0,o={}},i.logInternalMessage=function(e,t){var n,r;a>=i.maxInternalMessageLimit()||(n=!0,r="AITR_"+t.messageId,o[r]?n=!1:o[r]=!0,n&&(e<=i.telemetryLoggingLevel()&&(i.queue.push(t),a++),a===i.maxInternalMessageLimit()&&(t=new Me(V.MessageLimitPerPVExceeded,e="Internal events throttle limit per PageView reached for this app.",!1),i.queue.push(t),i.warnToConsole(e))))}})},ke=(Oe.ParentContextKey="parent",Oe.ChildrenContextKey="childEvts",Oe);function Oe(e,a,t){var r,i=this,o=!1;i.start=he(),i.name=e,i.isAsync=t,i.isChildEvt=function(){return!1},ee(a)&&(o=function(e){if(Y)try{var t={enumerable:!0,configurable:!0,get:function(){return!r&&ee(a)&&(r=a(),a=null),r}};return Y(e,"payload",t),!0}catch(n){}return!1}(i)),i.getCtx=function(e){return e?(e===Oe.ParentContextKey||e===Oe.ChildrenContextKey?i:i.ctx||{})[e]:null},i.setCtx=function(e,t){e&&(e===Oe.ParentContextKey?(i[e]||(i.isChildEvt=function(){return!0}),i[e]=t):e===Oe.ChildrenContextKey?i[e]=t:(i.ctx=i.ctx||{})[e]=t)},i.complete=function(){var e=0,t=i.getCtx(Oe.ChildrenContextKey);if(ie(t))for(var n=0;n<t.length;n++){var r=t[n];r&&(e+=r.time)}i.time=he()-i.start,i.exTime=i.time-e,i.complete=function(){},!o&&ee(a)&&(i.payload=a())}}var Ue="CoreUtils.doPerf";function je(e,t,n,r,a){if(e){var i=e;if(i=ee(i.getPerfMgr)?i.getPerfMgr():i){var o,s=void 0,e=i.getCtx(Ue);try{if(s=i.create(t(),r,a))return e&&s.setCtx&&(s.setCtx(ke.ParentContextKey,e),e.getCtx&&e.setCtx&&((o=e.getCtx(ke.ChildrenContextKey))||(o=[],e.setCtx(ke.ChildrenContextKey,o)),o.push(s))),i.setCtx(Ue,s),n(s)}catch(l){s&&s.setCtx&&s.setCtx("exception",l)}finally{s&&i.fire(s),i.setCtx(Ue,e)}}}return n()}var ze=function(a,t){var i=this,o=null,s=ee(a.processTelemetry),l=ee(a.setNextPlugin);i._hasRun=!1,i.getPlugin=function(){return a},i.getNext=function(){return o},i.setNext=function(e){o=e},i.processTelemetry=function(n,r){r=r||t;var e=a?a.identifier:"TelemetryPluginChain";je(r?r.core():null,function(){return e+":processTelemetry"},function(){if(a&&s){i._hasRun=!0;try{r.setNext(o),l&&a.setNextPlugin(o),o&&(o._hasRun=!1),a.processTelemetry(n,r)}catch(t){var e=o&&o._hasRun;o&&e||r.diagLog().throwInternal(N.CRITICAL,V.PluginException,"Plugin ["+a.identifier+"] failed during processTelemetry - "+t),o&&!e&&o.processTelemetry(n,r)}}else o&&(i._hasRun=!0,o.processTelemetry(n,r))},function(){return{item:n}},!n.sync)}};function Ge(e,t){var n=[];if(e&&0<e.length)for(var r=null,a=0;a<e.length;a++){var i=e[a];i&&ee(i.processTelemetry)&&(i=new ze(i,t),n.push(i),r&&r.setNext(i),r=i)}return 0<n.length?n[0]:null}var Ke=function xr(e,a,n,t){var r,i,o,s,l=this,u=null;null!==t&&(e&&ee(e.getPlugin)?u=function(e,t,n){var r=[],a=!n;if(e)for(;e;){var i=e.getPlugin();!a&&i!==n||(a=!0,r.push(i)),e=e.getNext()}return a||r.push(n),Ge(r,t)}(e,l,t||e.getPlugin()):t?(r=l,o=e,s=!1,(i=t)&&e&&(o=[],ue(e,function(e){!s&&e!==i||(s=!0,o.push(e))})),i&&!s&&(o=o||[]).push(i),u=Ge(o,r)):Z(t)&&(u=Ge(e,l))),l.core=function(){return n},l.diagLog=function(){return De(n,a)},l.getCfg=function(){return a},l.getExtCfg=function(e,t){var n,r;return void 0===t&&(t={}),!a||(r=a.extensionConfig)&&e&&(n=r[e]),n||t},l.getConfig=function(e,t,n){var r;return void 0===n&&(n=!1),(e=l.getExtCfg(e,null))&&!$(e[t])?r=e[t]:a&&!$(a[t])&&(r=a[t]),$(r)?n:r},l.hasNext=function(){return null!=u},l.getNext=function(){return u},l.setNext=function(e){u=e},l.processNext=function(e){var t=u;t&&(u=t.getNext(),t.processTelemetry(e,l))},l.createNew=function(e,t){return new xr((e=void 0===e?null:e)||u,a,n,t)}},Ve="getPlugin",qe=(We.prototype.initialize=function(e,t,n,r){this._baseTelInit(e,t,n,r)},We);function We(){var i=this,o=!1,s=null,l=null;i.core=null,i.diagLog=function(e){return i._getTelCtx(e).diagLog()},i.isInitialized=function(){return o},i.setInitialized=function(e){o=e},i.setNextPlugin=function(e){l=e},i.processNext=function(e,t){t?t.processNext(e):l&&ee(l.processTelemetry)&&l.processTelemetry(e,null)},i._getTelCtx=function(e){var t=e=void 0===e?null:e;return t||(e=s||new Ke(null,{},i.core),t=l&&l[Ve]?e.createNew(null,l[Ve]):e.createNew(null,l)),t},i._baseTelInit=function(e,t,n,r){e&&ve(e,"extensionConfig",[],null,$),!r&&t&&(r=t.getProcessTelContext().getNext());var a=l;l&&l[Ve]&&(a=l[Ve]()),i.core=t,s=new Ke(r,e,t,a),o=!0}}var He={Attach:te,AttachEvent:te,Detach:ne,DetachEvent:ne};function Xe(e,t,n){var r,a,i=t.length,o=(t&&150<(t=de(t.toString())).length&&(r=t.substring(0,150),e.throwInternal(N.WARNING,V.NameTooLong,"name is too long.  It has been truncated to 150 characters.",{name:t},!0)),r||t);if(o.length!==i){for(var s=0,l=o;n[l]!==undefined;)s++,l=o.substring(0,147)+(a="00"+s).substr(a.length-3);o=l}return o}function Ye(e,t,n){var r;return void 0===n&&(n=1024),t&&(n=n||1024,(t=de(t)).toString().length>n&&(r=t.toString().substring(0,n),e.throwInternal(N.WARNING,V.StringValueTooLong,"string value is too long. It has been truncated to "+n+" characters.",{value:t},!0))),r||t}function Je(e,t){return et(e,t,2048,V.UrlTooLong)}function Ze(e,t){var n;return t&&32768<t.length&&(n=t.substring(0,32768),e.throwInternal(N.WARNING,V.MessageTruncated,"message is too long, it has been truncated to 32768 characters.",{message:t},!0)),n||t}function $e(r,e){var a;return e&&(a={},re(e,function(e,t){if(Q(t)&&Ee())try{t=Re().stringify(t)}catch(n){r.throwInternal(N.WARNING,V.CannotSerializeObjectNonSerializable,"custom property is not valid",{exception:n},!0)}t=Ye(r,t,8192),e=Xe(r,e,a),a[e]=t}),e=a),e}function Qe(n,e){var r;return e&&(r={},re(e,function(e,t){e=Xe(n,e,r),r[e]=t}),e=r),e}function et(e,t,n,r){var a;return t&&(t=de(t)).length>n&&(a=t.substring(0,n),e.throwInternal(N.WARNING,r,"input is too long, it has been truncated to "+n+" characters.",{data:t},!0)),a||t}function tt(e){var t=""+Math.floor((e=Math.round(e=isNaN(e)||e<0?0:e))/1e3)%60,n=""+Math.floor(e/6e4)%60,r=""+Math.floor(e/36e5)%24,a=Math.floor(e/864e5),e=1===(e=""+e%1e3).length?"00"+e:2===e.length?"0"+e:e,t=t.length<2?"0"+t:t,n=n.length<2?"0"+n:n;return(0<a?a+".":"")+(r=r.length<2?"0"+r:r)+":"+n+":"+t+"."+e}function nt(){var e=Ae();return"sendBeacon"in e&&e.sendBeacon}var rt,at="sampleRate",it="ProcessLegacy",ot="http.method",st="not_specified";(Rn=rt=rt||{})[Rn.LocalStorage=0]="LocalStorage",Rn[Rn.SessionStorage=1]="SessionStorage",(In=sn=sn||{})[In.AI=0]="AI",In[In.AI_AND_W3C=1]="AI_AND_W3C",In[In.W3C=2]="W3C";var lt=undefined;function ut(e){try{if($(d()))return null;var t=new Date,n=xe(e===rt.LocalStorage?"localStorage":"sessionStorage");n.setItem(t.toString(),t.toString());var r=n.getItem(t.toString())!==t.toString();if(n.removeItem(t.toString()),!r)return n}catch(a){}return null}function ct(){return dt()?ut(rt.SessionStorage):null}function dt(){return lt=lt===undefined?!!ut(rt.SessionStorage):lt}function ft(e,t){var n=ct();if(null!==n)try{return n.getItem(t)}catch(r){lt=!1,e.throwInternal(N.WARNING,V.BrowserCannotReadSessionStorage,"Browser failed read of session storage. "+me(r),{exception:Le(r)})}return null}function pt(e,t,n){var r=ct();if(null!==r)try{return r.setItem(t,n),1}catch(a){lt=!1,e.throwInternal(N.WARNING,V.BrowserCannotWriteSessionStorage,"Browser failed write to session storage. "+me(a),{exception:Le(a)})}}var gt=Ne()||{},ht=0,mt=[null,null,null,null,null],vt=["https://dc.services.visualstudio.com/v2/track","https://breeze.aimon.applicationinsights.io/v2/track","https://dc-int.services.visualstudio.com/v2/track"];function yt(e){return~vt.indexOf(e.toLowerCase())}var It,Ct=(h(St,It=function(){}),St);function St(){return It.call(this)||this}var Tt,wt=(h(xt,Tt=function(){this.ver=1,this.sampleRate=100,this.tags={}}),xt);function xt(e,t,n){var r=Tt.call(this)||this;return r.name=Ye(e,n)||st,r.data=t,r.time=le(new Date),r.aiDataContract={time:1,iKey:1,name:1,sampleRate:function(){return 100===r.sampleRate?4:1},tags:1,data:1},r}var bt,_t=(h(Nt,bt=Ln=function(){this.ver=2,this.properties={},this.measurements={}}),Nt.envelopeType="Microsoft.ApplicationInsights.{0}.Event",Nt.dataType="EventData",Nt);function Nt(e,t,n,r){var a=bt.call(this)||this;return a.aiDataContract={ver:1,name:1,properties:0,measurements:0},a.name=Ye(e,t)||st,a.properties=$e(e,n),a.measurements=Qe(e,r),a}var At=function(){},Et=function(){this.hasFullStack=!0,this.parsedStack=[]},Rt="error",Lt="stack",Ft="stackDetails",Mt="errorSrc",Pt="message",Dt="description";function Bt(e,t){var n=e;return n&&!se(n)&&(JSON&&JSON.stringify?(n=JSON.stringify(e),!t||n&&"{}"!==n||(n=ee(e.toString)?e.toString():""+e)):n=e+" - (Missing JSON.stringify)"),n||""}function kt(e,t){var n=e;return e&&((n=n&&!se(n)&&(e[Pt]||e[Dt])||n)&&!se(n)&&(n=Bt(n,!0)),e.filename&&(n=n+" @"+(e.filename||"")+":"+(e.lineno||"?")+":"+(e.colno||"?"))),(t&&"String"!==t&&"Object"!==t&&"Error"!==t&&!~(n||"").indexOf(t)?t+": "+n:n)||""}function Ot(e){return e&&e.src&&se(e.src)&&e.obj&&ie(e.obj)}function Ut(e){var t=e||"",e=(t=se(t)?t:se(t[Lt])?t[Lt]:""+t).split("\n");return{src:t,obj:e}}function jt(e){var t,n=null;if(e)try{e[Lt]?n=Ut(e[Lt]):e[Rt]&&e[Rt][Lt]?n=Ut(e[Rt][Lt]):e.exception&&e.exception[Lt]?n=Ut(e.exception[Lt]):Ot(e)?n=e:Ot(e[Ft])?n=e[Ft]:window.opera&&e[Pt]?n=function(e){for(var t=[],n=e.split("\n"),r=0;r<n.length;r++){var a=n[r];n[r+1]&&(a+="@"+n[r+1],r++),t.push(a)}return{src:e,obj:t}}(e.message):se(e)?n=Ut(e):(t=e[Pt]||e[Dt]||"",se(e[Mt])&&(t&&(t+="\n"),t+=" from "+e[Mt]),t&&(n=Ut(t)))}catch(r){n=Ut(r)}return n||{src:"",obj:null}}function zt(e){var t="";if(e&&!(t=e.typeName||e.name||""))try{var n=/function (.{1,200})\(/.exec(e.constructor.toString()),t=n&&1<n.length?n[1]:""}catch(r){}return t}function Gt(e){if(e)try{if(!se(e)){var t=zt(e),n=Bt(e,!1);return n&&"{}"!==n||(e[Rt]&&(t=zt(e=e[Rt])),n=Bt(e,!0)),n.indexOf(t)&&"String"!==t?t+":"+n:n}}catch(r){}return""+(e||"")}var Kt,Vt=(h(qt,Kt=function(){this.ver=2,this.exceptions=[],this.properties={},this.measurements={}}),qt.CreateAutoException=function(e,t,n,r,a,i,o,s){var l=zt(a||i||e);return{message:kt(e,l),url:t,lineNumber:n,columnNumber:r,error:Gt(a||i||e),evt:Gt(i||e),typeName:l,stackDetails:jt(o||a||i),errorSrc:s}},qt.CreateFromInterface=function(t,e,n,r){var a=e.exceptions&&ce(e.exceptions,function(e){return Ht.CreateFromInterface(t,e)});return new qt(t,p({},e,{exceptions:a}),n,r)},qt.prototype.toInterface=function(){var e=this.exceptions,t=this.properties,n=this.measurements,r=this.severityLevel;this.ver;var a=this.problemGroup,i=this.id,o=this.isManual;return{ver:"4.0",exceptions:e instanceof Array&&ce(e,function(e){return e.toInterface()})||undefined,severityLevel:r,properties:t,measurements:n,problemGroup:a,id:i,isManual:o}},qt.CreateSimpleException=function(e,t,n,r,a,i){return{exceptions:[{hasFullStack:!0,message:e,stack:a,typeName:t}]}},qt.envelopeType="Microsoft.ApplicationInsights.{0}.Exception",qt.dataType="ExceptionData",qt.formatError=Gt,qt);function qt(e,t,n,r,a,i){var o,s=Kt.call(this)||this;return s.aiDataContract={ver:1,exceptions:1,severityLevel:0,properties:0,measurements:0},Q(o=t)&&"ver"in o&&"exceptions"in o&&"properties"in o?(s.exceptions=t.exceptions,s.properties=t.properties,s.measurements=t.measurements,t.severityLevel&&(s.severityLevel=t.severityLevel),t.id&&(s.id=t.id),t.problemGroup&&(s.problemGroup=t.problemGroup),s.ver=2,$(t.isManual)||(s.isManual=t.isManual)):(s.exceptions=[new Ht(e,t,n=n||{})],s.properties=$e(e,n),s.measurements=Qe(e,r),a&&(s.severityLevel=a),i&&(s.id=i)),s}var Wt,Ht=(h(Xt,Wt=Et),Xt.prototype.toInterface=function(){var e=this.parsedStack instanceof Array&&ce(this.parsedStack,function(e){return e.toInterface()});return{id:this.id,outerId:this.outerId,typeName:this.typeName,message:this.message,hasFullStack:this.hasFullStack,stack:this[Lt],parsedStack:e||undefined}},Xt.CreateFromInterface=function(e,t){var n=t.parsedStack instanceof Array&&ce(t.parsedStack,function(e){return Jt.CreateFromInterface(e)})||t.parsedStack;return new Xt(e,p({},t,{parsedStack:n}))},Xt);function Xt(e,t,n){var u,r,a,i,o=Wt.call(this)||this;return o.aiDataContract={id:0,outerId:0,typeName:1,message:1,hasFullStack:0,stack:0,parsedStack:2},Q(i=t)&&"hasFullStack"in i&&"typeName"in i?(o.typeName=t.typeName,o.message=t.message,o[Lt]=t[Lt],o.parsedStack=t.parsedStack,o.hasFullStack=t.hasFullStack):(i=(u=t)&&u.evt,oe(u)||(u=u[Rt]||i||u),o.typeName=Ye(e,zt(u))||st,o.message=Ze(e,kt(t||u,o.typeName))||st,u=t[Ft]||jt(t),o.parsedStack=function(e){if((e=u.obj)&&0<e.length){var t=[],n=0,r=0;if(ue(e,function(e){e=e.toString(),Jt.regex.test(e)&&(e=new Jt(e,n++),r+=e.sizeInBytes,t.push(e))}),32768<r)for(var a=0,i=t.length-1,o=0,s=a,l=i;a<i;){if(32768<(o+=t[a].sizeInBytes+t[i].sizeInBytes)){t.splice(s,l-s+1);break}s=a,l=i,a++,i--}}return t}(),o[Lt]=(t=e,a="",(e=u)&&(e.obj?ue(e.obj,function(e){a+=e+"\n"}):a=e.src||""),!(u=a)||32768<(e=""+u).length&&(r=e.substring(0,32768),t.throwInternal(N.WARNING,V.ExceptionTruncated,"exception is too long, it has been truncated to 32768 characters.",{exception:u},!0)),r||u),o.hasFullStack=ie(o.parsedStack)&&0<o.parsedStack.length,n&&(n.typeName=n.typeName||o.typeName)),o}var Yt,Jt=(h(Zt,Yt=At),Zt.CreateFromInterface=function(e){return new Zt(e,null)},Zt.prototype.toInterface=function(){return{level:this.level,method:this.method,assembly:this.assembly,fileName:this.fileName,line:this.line}},Zt.regex=/^([\s]+at)?[\s]{0,50}([^\@\()]+?)[\s]{0,50}(\@|\()([^\(\n]+):([0-9]+):([0-9]+)(\)?)$/,Zt.baseSize=58,Zt);function Zt(e,t){var n,r=Yt.call(this)||this;return r.sizeInBytes=0,r.aiDataContract={level:1,method:1,assembly:0,fileName:0,line:0},"string"==typeof e?(n=e,r.level=t,r.method="<no_method>",r.assembly=de(n),r.fileName="",r.line=0,(n=n.match(Zt.regex))&&5<=n.length&&(r.method=de(n[2])||r.method,r.fileName=de(n[4]),r.line=parseInt(n[5])||0)):(r.level=e.level,r.method=e.method,r.assembly=e.assembly,r.fileName=e.fileName,r.line=e.line,r.sizeInBytes=0),r.sizeInBytes+=r.method.length,r.sizeInBytes+=r.fileName.length,r.sizeInBytes+=r.assembly.length,r.sizeInBytes+=Zt.baseSize,r.sizeInBytes+=r.level.toString().length,r.sizeInBytes+=r.line.toString().length,r}var $t,u=function(){this.ver=2,this.metrics=[],this.properties={},this.measurements={}};(Rn=$t={})[Rn.Measurement=0]="Measurement",Rn[Rn.Aggregation=1]="Aggregation";var Qt,en=(h(tn,Qt=function(){this.kind=$t.Measurement}),tn);function tn(){var e=null!==Qt&&Qt.apply(this,arguments)||this;return e.aiDataContract={name:1,kind:0,value:1,count:0,min:0,max:0,stdDev:0},e}var nn,rn=(h(an,nn=u),an.envelopeType="Microsoft.ApplicationInsights.{0}.Metric",an.dataType="MetricData",an);function an(e,t,n,r,a,i,o,s){var l=nn.call(this)||this;l.aiDataContract={ver:1,metrics:1,properties:0};var u=new en;return u.count=0<r?r:undefined,u.max=isNaN(i)||null===i?undefined:i,u.min=isNaN(a)||null===a?undefined:a,u.name=Ye(e,t)||st,u.value=n,l.metrics=[u],l.properties=$e(e,o),l.measurements=Qe(e,s),l}var on,sn=(h(ln,on=Ln),ln);function ln(){var e=on.call(this)||this;return e.ver=2,e.properties={},e.measurements={},e}var un,cn=(h(dn,un=sn),dn.envelopeType="Microsoft.ApplicationInsights.{0}.Pageview",dn.dataType="PageviewData",dn);function dn(e,t,n,r,a,i,o){var s=un.call(this)||this;return s.aiDataContract={ver:1,name:0,url:0,duration:0,properties:0,measurements:0,id:0},s.id=o&&et(e,o,128,V.IdTooLong).toString(),s.url=Je(e,n),s.name=Ye(e,t)||st,isNaN(r)||(s.duration=tt(r)),s.properties=$e(e,a),s.measurements=Qe(e,i),s}var fn,pn=(h(gn,fn=function(){this.ver=2,this.success=!0,this.properties={},this.measurements={}}),gn.envelopeType="Microsoft.ApplicationInsights.{0}.RemoteDependency",gn.dataType="RemoteDependencyData",gn);function gn(e,t,n,r,a,i,o,s,l,u,c,d){void 0===l&&(l="Ajax");var f=fn.call(this)||this;f.aiDataContract={id:1,ver:1,name:0,resultCode:0,duration:0,success:0,data:0,target:0,type:0,properties:0,measurements:0,kind:0,value:0,count:0,min:0,max:0,stdDev:0,dependencyKind:0,dependencySource:0,commandName:0,dependencyTypeName:0},f.id=t,f.duration=tt(a),f.success=i,f.resultCode=o+"",f.type=Ye(e,l);var p,g,h,m,v,y,I,C,S,T,o=(p=e,t=s,o=i=a=r,i=(l=n)&&0<l.length?(g=l,T=(S=mt)[C=ht],gt.createElement?S[C]||(T=S[C]=gt.createElement("a")):T={host:(y=!0,I=null,!(v=h=g)||null!=(v=v.match(/(\w*):\/\/(.[^/:]+)(\:[\d]+)?/i))&&2<v.length&&se(v[2])&&0<v[2].length&&(I=v[2]||"",y&&2<v.length&&(y=(v[1]||"").toLowerCase(),v=v[3]||"",I+=v="http"==y&&":80"===v||"https"==y&&":443"===v?"":v)),(h=I||"")&&null!=(m=h.match(/(www[0-9]?\.)?(.[^/:]+)(\:[\d]+)?/i))&&3<m.length&&se(m[2])&&0<m[2].length?m[2]+(m[3]||""):h)},T.href=g,++C>=S.length&&(C=0),ht=C,T=(s=T).host,i||(null!=s.pathname?("/"!=((n=0===s.pathname.length?"/":s.pathname)[0]||"")&&(n="/"+n),o=s.pathname,Ye(p,t?t+" "+n:n)):Ye(p,l))):T=a,{target:T,name:i,data:o});return f.data=Je(e,r)||o.data,f.target=Ye(e,o.target),u&&(f.target=f.target+" | "+u),f.name=Ye(e,o.name),f.properties=$e(e,c),f.measurements=Qe(e,d),f}var hn,mn=(h(vn,hn=function(){this.ver=2,this.properties={},this.measurements={}}),vn.envelopeType="Microsoft.ApplicationInsights.{0}.Message",vn.dataType="MessageData",vn);function vn(e,t,n,r,a){var i=hn.call(this)||this;return i.aiDataContract={ver:1,message:1,severityLevel:0,properties:0},i.message=Ze(e,t=t||st),i.properties=$e(e,r),i.measurements=Qe(e,a),n&&(i.severityLevel=n),i}var yn,In=(h(Cn,yn=sn),Cn);function Cn(){var e=yn.call(this)||this;return e.ver=2,e.properties={},e.measurements={},e}var Sn,Tn=(h(wn,Sn=In),wn.envelopeType="Microsoft.ApplicationInsights.{0}.PageviewPerformance",wn.dataType="PageviewPerformanceData",wn);function wn(e,t,n,r,a,i,o){var s=Sn.call(this)||this;return s.aiDataContract={ver:1,name:0,url:0,duration:0,perfTotal:0,networkConnect:0,sentRequest:0,receivedResponse:0,domProcessing:0,properties:0,measurements:0},s.url=Je(e,n),s.name=Ye(e,t)||st,s.properties=$e(e,a),s.measurements=Qe(e,i),o&&(s.domProcessing=o.domProcessing,s.duration=o.duration,s.networkConnect=o.networkConnect,s.perfTotal=o.perfTotal,s.receivedResponse=o.receivedResponse,s.sentRequest=o.sentRequest),s}var xn,bn=(h(_n,xn=Ct),_n);function _n(e,t){var n=xn.call(this)||this;return n.aiDataContract={baseType:1,baseData:1},n.baseType=e,n.baseData=t,n}function Nn(e){var t="ai."+e+".";return function(e){return t+e}}var An,En,Et=Nn("application"),At=Nn("device"),Rn=Nn("location"),u=Nn("operation"),Ln=Nn("session"),sn=Nn("user"),In=Nn("cloud"),Ct=Nn("internal"),Fn=(En={applicationVersion:Et("ver"),applicationBuild:Et("build"),applicationTypeId:Et("typeId"),applicationId:Et("applicationId"),applicationLayer:Et("layer"),deviceId:At("id"),deviceIp:At("ip"),deviceLanguage:At("language"),deviceLocale:At("locale"),deviceModel:At("model"),deviceFriendlyName:At("friendlyName"),deviceNetwork:At("network"),deviceNetworkName:At("networkName"),deviceOEMName:At("oemName"),deviceOS:At("os"),deviceOSVersion:At("osVersion"),deviceRoleInstance:At("roleInstance"),deviceRoleName:At("roleName"),deviceScreenResolution:At("screenResolution"),deviceType:At("type"),deviceMachineName:At("machineName"),deviceVMName:At("vmName"),deviceBrowser:At("browser"),deviceBrowserVersion:At("browserVersion"),locationIp:Rn("ip"),locationCountry:Rn("country"),locationProvince:Rn("province"),locationCity:Rn("city"),operationId:u("id"),operationName:u("name"),operationParentId:u("parentId"),operationRootId:u("rootId"),operationSyntheticSource:u("syntheticSource"),operationCorrelationVector:u("correlationVector"),sessionId:Ln("id"),sessionIsFirst:Ln("isFirst"),sessionIsNew:Ln("isNew"),userAccountAcquisitionDate:sn("accountAcquisitionDate"),userAccountId:sn("accountId"),userAgent:sn("userAgent"),userId:sn("id"),userStoreRegion:sn("storeRegion"),userAuthUserId:sn("authUserId"),userAnonymousUserAcquisitionDate:sn("anonUserAcquisitionDate"),userAuthenticatedUserAcquisitionDate:sn("authUserAcquisitionDate"),cloudName:In("name"),cloudRole:In("role"),cloudRoleVer:In("roleVer"),cloudRoleInstance:In("roleInstance"),cloudEnvironment:In("environment"),cloudLocation:In("location"),cloudDeploymentUnit:In("deploymentUnit"),internalNodeName:Ct("nodeName"),internalSdkVersion:Ct("sdkVersion"),internalAgentVersion:Ct("agentVersion"),internalSnippet:Ct("snippet"),internalSdkSrc:Ct("sdkSrc")},h(Mn,An=function(){var n=this;re(En,function(e,t){n[e]=t})}),Mn);function Mn(){return An.call(this)||this}var Pn=new Fn,Dn=function br(n){var r=[];K(br,this,function(t){t.enqueue=function(e){r.push(e)},t.count=function(){return r.length},t.clear=function(){r.length=0},t.getItems=function(){return r.slice(0)},t.batchPayloads=function(e){return e&&0<e.length?n.emitLineDelimitedJson()?e.join("\n"):"["+e.join(",")+"]":null},t.markAsSent=function(e){t.clear()},t.clearSent=function(e){}})},Bn=(kn.BUFFER_KEY="AI_buffer",kn.SENT_BUFFER_KEY="AI_sentBuffer",kn.MAX_BUFFER_SIZE=2e3,kn);function kn(o,s){var l,u=!1;K(kn,this,function(e){var t=a(kn.BUFFER_KEY),n=a(kn.SENT_BUFFER_KEY);function r(t,e){var n=[];return ue(e,function(e){ee(e)||-1!==function(e,t){for(var n=e.length,r=0;r<n;r++)if(r in e&&e[r]===t)return r;return-1}(t,e)||n.push(e)}),n}function a(e){try{var e=s.namePrefix&&s.namePrefix()?s.namePrefix()+"_"+e:e,t=ft(o,e);if(t){var n=Re().parse(t);if((n=se(n)?Re().parse(n):n)&&ie(n))return n}}catch(r){o.throwInternal(N.CRITICAL,V.FailedToRestoreStorageBuffer," storage key: "+e+", "+me(r),{exception:Le(r)})}return[]}function i(e,t){try{var e=s.namePrefix&&s.namePrefix()?s.namePrefix()+"_"+e:e,n=JSON.stringify(t);pt(o,e,n)}catch(r){pt(o,e,JSON.stringify([])),o.throwInternal(N.WARNING,V.FailedToSetStorageBuffer," storage key: "+e+", "+me(r)+". Buffer cleared",{exception:Le(r)})}}(l=t.concat(n)).length>kn.MAX_BUFFER_SIZE&&(l.length=kn.MAX_BUFFER_SIZE),i(kn.SENT_BUFFER_KEY,[]),i(kn.BUFFER_KEY,l),e.enqueue=function(e){l.length>=kn.MAX_BUFFER_SIZE?u||(o.throwInternal(N.WARNING,V.SessionStorageBufferFull,"Maximum buffer size reached: "+l.length,!0),u=!0):(l.push(e),i(kn.BUFFER_KEY,l))},e.count=function(){return l.length},e.clear=function(){l=[],i(kn.BUFFER_KEY,[]),i(kn.SENT_BUFFER_KEY,[]),u=!1},e.getItems=function(){return l.slice(0)},e.batchPayloads=function(e){return e&&0<e.length?s.emitLineDelimitedJson()?e.join("\n"):"["+e.join(",")+"]":null},e.markAsSent=function(e){l=r(e,l),i(kn.BUFFER_KEY,l);var t=a(kn.SENT_BUFFER_KEY);t instanceof Array&&e instanceof Array&&((t=t.concat(e)).length>kn.MAX_BUFFER_SIZE&&(o.throwInternal(N.CRITICAL,V.SessionStorageBufferFull,"Sent buffer reached its maximum size: "+t.length,!0),t.length=kn.MAX_BUFFER_SIZE),i(kn.SENT_BUFFER_KEY,t))},e.clearSent=function(e){e=r(e,e=a(kn.SENT_BUFFER_KEY)),i(kn.SENT_BUFFER_KEY,e)}})}var On="baseType",Un="baseData",jn="properties";function zn(e,t,n){return ve(e,t,n,ye)}var Gn=(Kn.extractPropsAndMeasurements=function(e,n,r){$(e)||re(e,function(e,t){"number"==typeof t?r[e]=t:se(t)?n[e]=t:Ee()&&(n[e]=Re().stringify(t))})},Kn.createEnvelope=function(e,t,n,r){return zn(r=new wt(e,r,t),"sampleRate",n[at]),(n[Un]||{}).startTime&&(r.time=le(n[Un].startTime)),r.iKey=n.iKey,t=n.iKey.replace(/-/g,""),r.name=r.name.replace("{0}",t),Kn.extractPartAExtensions(n,r),n.tags=n.tags||[],Ie(r)},Kn.extractPartAExtensions=function(e,t){var n=t.tags=t.tags||{},r=e.ext=e.ext||{},a=e.tags=e.tags||[],i=r.user;i&&(zn(n,Pn.userAuthUserId,i.authId),zn(n,Pn.userId,i.id||i.localId)),(i=r.app)&&zn(n,Pn.sessionId,i.sesId),(i=r.device)&&(zn(n,Pn.deviceId,i.id||i.localId),zn(n,Pn.deviceType,i.deviceClass),zn(n,Pn.deviceIp,i.ip),zn(n,Pn.deviceModel,i.model),zn(n,Pn.deviceType,i.deviceType)),(i=e.ext.web)&&(zn(n,Pn.deviceLanguage,i.browserLang),zn(n,Pn.deviceBrowserVersion,i.browserVer),zn(n,Pn.deviceBrowser,i.browser),zn(e=(e=(e=t.data=t.data||{})[Un]=e[Un]||{})[jn]=e[jn]||{},"domain",i.domain),zn(e,"isManual",i.isManual?"true":null),zn(e,"screenRes",i.screenRes),zn(e,"userConsent",i.userConsent?"true":null)),(i=r.os)&&zn(n,Pn.deviceOS,i.name),(r=r.trace)&&(zn(n,Pn.operationParentId,r.parentID),zn(n,Pn.operationName,r.name),zn(n,Pn.operationId,r.traceID));for(var o={},s=a.length-1;0<=s;s--)re(a[s],function(e,t){o[e]=t}),a.splice(s,1);re(a,function(e,t){o[e]=t}),(n=p({},n,o))[Pn.internalSdkVersion]||(n[Pn.internalSdkVersion]="javascript:"+Kn.Version),t.tags=Ie(n)},Kn.prototype.Init=function(e,t){this._logger=e,$(t[Un])&&this._logger.throwInternal(N.CRITICAL,V.TelemetryEnvelopeInvalid,"telemetryItem.baseData cannot be null.")},Kn.Version="2.6.5",Kn);function Kn(){}var Vn,qn=(h(Wn,Vn=Gn),Wn.prototype.Create=function(e,t){Vn.prototype.Init.call(this,e,t);var n=t[Un].measurements||{},r=t[Un][jn]||{};Gn.extractPropsAndMeasurements(t.data,r,n);var a=t[Un];if($(a))return e.warnToConsole("Invalid input for dependency data"),null;var i=a[jn]&&a[jn][ot]?a[jn][ot]:"GET",n=new pn(e,a.id,a.target,a.name,a.duration,a.success,a.responseCode,i,a.type,a.correlationContext,r,n),n=new bn(pn.dataType,n);return Gn.createEnvelope(e,pn.envelopeType,t,n)},Wn.DependencyEnvelopeCreator=new Wn,Wn);function Wn(){return null!==Vn&&Vn.apply(this,arguments)||this}var Hn,Xn=(h(Yn,Hn=Gn),Yn.prototype.Create=function(e,t){Hn.prototype.Init.call(this,e,t);var n={},r={};t[On]!==_t.dataType&&(n.baseTypeSource=t[On]),t[On]===_t.dataType?(n=t[Un][jn]||{},r=t[Un].measurements||{}):t[Un]&&Gn.extractPropsAndMeasurements(t[Un],n,r),Gn.extractPropsAndMeasurements(t.data,n,r);var a=t[Un].name,r=new _t(e,a,n,r),r=new bn(_t.dataType,r);return Gn.createEnvelope(e,_t.envelopeType,t,r)},Yn.EventEnvelopeCreator=new Yn,Yn);function Yn(){return null!==Hn&&Hn.apply(this,arguments)||this}var Jn,Zn=(h($n,Jn=Gn),$n.prototype.Create=function(e,t){Jn.prototype.Init.call(this,e,t);var n=t[Un].measurements||{},r=t[Un][jn]||{};Gn.extractPropsAndMeasurements(t.data,r,n);var a=t[Un],n=Vt.CreateFromInterface(e,a,r,n),n=new bn(Vt.dataType,n);return Gn.createEnvelope(e,Vt.envelopeType,t,n)},$n.ExceptionEnvelopeCreator=new $n,$n);function $n(){return null!==Jn&&Jn.apply(this,arguments)||this}var Qn,er=(h(tr,Qn=Gn),tr.prototype.Create=function(e,t){Qn.prototype.Init.call(this,e,t);var n=t[Un],r=n[jn]||{},a=n.measurements||{};return Gn.extractPropsAndMeasurements(t.data,r,a),a=new rn(e,n.name,n.average,n.sampleCount,n.min,n.max,r,a),a=new bn(rn.dataType,a),Gn.createEnvelope(e,rn.envelopeType,t,a)},tr.MetricEnvelopeCreator=new tr,tr);function tr(){return null!==Qn&&Qn.apply(this,arguments)||this}var nr,rr=(h(ar,nr=Gn),ar.prototype.Create=function(e,t){nr.prototype.Init.call(this,e,t);var n,r="duration";$(o=t[Un])||$(o[jn])||$(o[jn][r])?$(t.data)||$(t.data[r])||(n=t.data[r],delete t.data[r]):(n=o[jn][r],delete o[jn][r]);var a=t[Un];((t.ext||{}).trace||{}).traceID&&(l=t.ext.trace.traceID);var i=a.id||l,r=a.name,o=a.uri,s=a[jn]||{},l=a.measurements||{};return $(a.refUri)||(s.refUri=a.refUri),$(a.pageType)||(s.pageType=a.pageType),$(a.isLoggedIn)||(s.isLoggedIn=a.isLoggedIn.toString()),$(a[jn])||re(a[jn],function(e,t){s[e]=t}),Gn.extractPropsAndMeasurements(t.data,s,l),i=new cn(e,r,o,n,s,l,i),i=new bn(cn.dataType,i),Gn.createEnvelope(e,cn.envelopeType,t,i)},ar.PageViewEnvelopeCreator=new ar,ar);function ar(){return null!==nr&&nr.apply(this,arguments)||this}var ir,or=(h(sr,ir=Gn),sr.prototype.Create=function(e,t){ir.prototype.Init.call(this,e,t);var n=t[Un],r=n.name,a=n.uri||n.url,i=n[jn]||{},o=n.measurements||{};return Gn.extractPropsAndMeasurements(t.data,i,o),n=new Tn(e,r,a,undefined,i,o,n),n=new bn(Tn.dataType,n),Gn.createEnvelope(e,Tn.envelopeType,t,n)},sr.PageViewPerformanceEnvelopeCreator=new sr,sr);function sr(){return null!==ir&&ir.apply(this,arguments)||this}var lr,ur=(h(cr,lr=Gn),cr.prototype.Create=function(e,t){lr.prototype.Init.call(this,e,t);var n=t[Un].message,r=t[Un].severityLevel,a=t[Un][jn]||{},i=t[Un].measurements||{};return Gn.extractPropsAndMeasurements(t.data,a,i),i=new mn(e,n,r,a,i),i=new bn(mn.dataType,i),Gn.createEnvelope(e,mn.envelopeType,t,i)},cr.TraceEnvelopeCreator=new cr,cr);function cr(){return null!==lr&&lr.apply(this,arguments)||this}var dr=function _r(d){K(_r,this,function(e){function u(o,s){var e="__aiCircularRefCheck",l={};if(!o)return d.throwInternal(N.CRITICAL,V.CannotSerializeObject,"cannot serialize object because it is null or undefined",{name:s},!0),l;if(o[e])return d.throwInternal(N.WARNING,V.CircularReferenceDetected,"Circular reference detected while serializing object",{name:s},!0),l;if(o.aiDataContract)return o[e]=!0,re(o.aiDataContract,function(e,t){var n=ee(t)?1&t():1&t,r=ee(t)?4&t():4&t,a=2&t,i=o[e]!==undefined,t=Q(o[e])&&null!==o[e];!n||i||a?r||(r=void 0,(r=t?(a?c:u)(o[e],e):o[e])!==undefined&&(l[e]=r)):d.throwInternal(N.CRITICAL,V.MissingRequiredFieldSpecification,"Missing required field specification. The field is required but not present on source",{field:e,name:s})}),delete o[e],l;if("measurements"===s)l=n(o,"number",s);else if("properties"===s)l=n(o,"string",s);else if("tags"===s)l=n(o,"string",s);else if(ie(o))l=c(o,s);else{d.throwInternal(N.WARNING,V.CannotSerializeObjectNonSerializable,"Attempting to serialize an object which does not implement ISerializable",{name:s},!0);try{Re().stringify(o),l=o}catch(t){d.throwInternal(N.CRITICAL,V.CannotSerializeObject,t&&ee(t.toString)?t.toString():"Error serializing object",null,!0)}}return l}function c(e,t){if(e)if(ie(e))for(var n=[],r=0;r<e.length;r++){var a=u(e[r],t+"["+r+"]");n.push(a)}else d.throwInternal(N.CRITICAL,V.ItemNotInArray,"This field was specified as an array in the contract but the item is not an array.\r\n",{name:t},!0);return n}function n(e,n,r){var a;return e&&(a={},re(e,function(e,t){"string"===n?t===undefined?a[e]="undefined":null===t?a[e]="null":t.toString?a[e]=t.toString():a[e]="invalid field: toString() is not defined.":"number"===n?t===undefined?a[e]="undefined":a[e]=null===t?"null":isNaN(t=parseFloat(t))?"NaN":t:(a[e]="invalid field: "+r+" is of unknown type.",d.throwInternal(N.CRITICAL,a[e],null,!0))})),a}e.serialize=function(e){e=u(e,"root");try{return Re().stringify(e)}catch(t){d.throwInternal(N.CRITICAL,V.CannotSerializeObject,t&&ee(t.toString)?t.toString():"Error serializing object",null,!0)}}})};function fr(){var o=_e(),s=Ne(),l=!1,u=!0;K(fr,this,function(e){try{var t,n;o&&He.Attach(o,"online",r)&&(He.Attach(o,"offline",a),l=!0),s&&(Z((t=s.body||s).ononline)||(t.ononline=r,t.onoffline=a,l=!0)),!l||(n=Ae())&&!$(n.onLine)&&(u=n.onLine)}catch(i){l=!1}function r(){u=!0}function a(){u=!1}e.isListening=l,e.isOnline=function(){var e=!0,t=Ae();return l?e=u:t&&!$(t.onLine)&&(e=t.onLine),e},e.isOffline=function(){return!e.isOnline()}})}var pr=fr.Offline=new fr,gr=(hr.prototype.getHashCodeScore=function(e){return this.getHashCode(e)/hr.INT_MAX_VALUE*100},hr.prototype.getHashCode=function(e){if(""===e)return 0;for(;e.length<hr.MIN_INPUT_LENGTH;)e=e.concat(e);for(var t=5381,n=0;n<e.length;++n)t=(t<<5)+t+e.charCodeAt(n),t&=t;return Math.abs(t)},hr.INT_MAX_VALUE=2147483647,hr.MIN_INPUT_LENGTH=8,hr);function hr(){}var mr=(vr.prototype.getSamplingScore=function(e){return e.tags&&e.tags[this.keys.userId]?this.hashCodeGeneragor.getHashCodeScore(e.tags[this.keys.userId]):e.ext&&e.ext.user&&e.ext.user.id?this.hashCodeGeneragor.getHashCodeScore(e.ext.user.id):e.tags&&e.tags[this.keys.operationId]?this.hashCodeGeneragor.getHashCodeScore(e.tags[this.keys.operationId]):e.ext&&e.ext.telemetryTrace&&e.ext.telemetryTrace.traceID?this.hashCodeGeneragor.getHashCodeScore(e.ext.telemetryTrace.traceID):100*Math.random()},vr);function vr(){this.hashCodeGeneragor=new gr,this.keys=new Fn}var yr=(Ir.prototype.isSampledIn=function(e){var t=this.sampleRate;return null===t||t===undefined||100<=t||e.baseType===rn.dataType||this.samplingScoreGenerator.getSamplingScore(e)<t},Ir);function Ir(e,t){this.INT_MAX_VALUE=2147483647,this._logger=t||De(null),(100<e||e<0)&&(this._logger.throwInternal(N.WARNING,V.SampleRateOutOfRange,"Sampling rate is out of range (0..100). Sampling will be disabled, you may be sending too much data which may affect your AI service level.",{samplingRate:e},!0),e=100),this.sampleRate=e,this.samplingScoreGenerator=new mr}function Cr(e){try{return e.responseText}catch(t){}return null}var Sr,qe=(h(Tr,Sr=qe),Tr.constructEnvelope=function(e,t,n){var r=t===e.iKey||$(t)?e:p({},e,{iKey:t});switch(r.baseType){case _t.dataType:return Xn.EventEnvelopeCreator.Create(n,r);case mn.dataType:return ur.TraceEnvelopeCreator.Create(n,r);case cn.dataType:return rr.PageViewEnvelopeCreator.Create(n,r);case Tn.dataType:return or.PageViewPerformanceEnvelopeCreator.Create(n,r);case Vt.dataType:return Zn.ExceptionEnvelopeCreator.Create(n,r);case rn.dataType:return er.MetricEnvelopeCreator.Create(n,r);case pn.dataType:return qn.DependencyEnvelopeCreator.Create(n,r);default:return Xn.EventEnvelopeCreator.Create(n,r)}},Tr._getDefaultAppInsightsChannelConfig=function(){return{endpointUrl:function(){return"https://dc.services.visualstudio.com/v2/track"},emitLineDelimitedJson:function(){return!1},maxBatchInterval:function(){return 15e3},maxBatchSizeInBytes:function(){return 102400},disableTelemetry:function(){return!1},enableSessionStorageBuffer:function(){return!0},isRetryDisabled:function(){return!1},isBeaconApiDisabled:function(){return!0},onunloadDisableBeacon:function(){return!1},instrumentationKey:function(){return undefined},namePrefix:function(){return undefined},samplingPercentage:function(){return 100},customHeaders:function(){return undefined}}},Tr._getEmptyAppInsightsChannelConfig=function(){return{endpointUrl:undefined,emitLineDelimitedJson:undefined,maxBatchInterval:undefined,maxBatchSizeInBytes:undefined,disableTelemetry:undefined,enableSessionStorageBuffer:undefined,isRetryDisabled:undefined,isBeaconApiDisabled:undefined,onunloadDisableBeacon:undefined,instrumentationKey:undefined,namePrefix:undefined,samplingPercentage:undefined,customHeaders:undefined}},Tr);function Tr(){var I,C,S,T,w,x=Sr.call(this)||this;x.priority=1001,x.identifier="AppInsightsChannelPlugin",x._XMLHttpRequestSupported=!1;var b={};return K(Tr,x,function(l,o){function e(){!function(){throw Error("Method not implemented.")}()}function i(e,t,n,r,a,i){var o=null;l._appId||(o=f(i))&&o.appId&&(l._appId=o.appId),(e<200||300<=e)&&0!==e?(301!==e&&307!==e&&308!==e||s(n))&&!l._senderConfig.isRetryDisabled()&&h(e)?(p(t),l.diagLog().throwInternal(N.WARNING,V.TransmissionFailed,". Response code "+e+". Will retry to send "+t.length+" items.")):l._onError(t,a):pr.isOffline()?l._senderConfig.isRetryDisabled()||(p(t,10),l.diagLog().throwInternal(N.WARNING,V.TransmissionFailed,". Offline - Response Code: "+e+". Offline status: "+pr.isOffline()+". Will retry to send "+t.length+" items.")):(s(n),206===e?(o=o||f(i))&&!l._senderConfig.isRetryDisabled()?l._onPartialSuccess(t,o):l._onError(t,a):(I=0,l._onSuccess(t,r)))}function s(e){return!(10<=w)&&!$(e)&&""!==e&&e!==l._senderConfig.endpointUrl()&&(l._senderConfig.endpointUrl=function(){return e},++w,1)}function u(e,t){var n=l._senderConfig.endpointUrl(),r=l._buffer.batchPayloads(e),r=new Blob([r],{type:"text/plain;charset=UTF-8"});Ae().sendBeacon(n,r)?(l._buffer.markAsSent(e),l._onSuccess(e,e.length)):(c(e,!0),l.diagLog().throwInternal(N.WARNING,V.TransmissionFailed,". Failed to send telemetry with Beacon API, retried with xhrSender."))}function c(t,e){var n=new XMLHttpRequest,r=l._senderConfig.endpointUrl();try{n.Microsoft_ApplicationInsights_BypassAjaxInstrumentation=!0}catch(a){}n.open("POST",r,e),n.setRequestHeader("Content-type","application/json"),yt(r)&&n.setRequestHeader("Sdk-Context","appId"),ue(ge(b),function(e){n.setRequestHeader(e,b[e])}),n.onreadystatechange=function(){return l._xhrReadyStateChange(n,t,t.length)},n.onerror=function(e){return l._onError(t,m(n),e)},r=l._buffer.batchPayloads(t),n.send(r),l._buffer.markAsSent(t)}function d(n,e){var t=l._senderConfig.endpointUrl(),r=l._buffer.batchPayloads(n),r=new Blob([r],{type:"text/plain;charset=UTF-8"}),a=new Headers;yt(t)&&a.append("Sdk-Context","appId"),ue(ge(b),function(e){a.append(e,b[e])}),r=new Request(t,{method:"POST",headers:a,body:r}),fetch(r).then(function(t){if(!t.ok)throw Error(t.statusText);t.text().then(function(e){i(t.status,n,t.url,n.length,t.statusText,e)}),l._buffer.markAsSent(n)})["catch"](function(e){l._onError(n,e.message)})}function f(e){try{if(e&&""!==e){var t=Re().parse(e);if(t&&t.itemsReceived&&t.itemsReceived>=t.itemsAccepted&&t.itemsReceived-t.itemsAccepted===t.errors.length)return t}}catch(n){l.diagLog().throwInternal(N.CRITICAL,V.InvalidBackendResponse,"Cannot parse the response. "+me(n),{response:e})}return null}function p(e,t){if(void 0===t&&(t=1),e&&0!==e.length){l._buffer.clearSent(e),I++;for(var n=0,r=e;n<r.length;n++){var a=r[n];l._buffer.enqueue(a)}i=I<=1?10:(i=1+Math.floor((Math.pow(2,I)-1)/2*Math.random()*10),Math.max(Math.min(i*=t,3600),10)),i=he()+1e3*i,C=i,g()}var i}function g(){var e;S||(e=C?Math.max(0,C-he()):0,e=Math.max(l._senderConfig.maxBatchInterval(),e),S=setTimeout(function(){l.triggerSend(!0,null,1)},e))}function h(e){return 408===e||429===e||500===e||503===e}function m(e,t){return e?"XMLHttpRequest,Status:"+e.status+",Response:"+Cr(e)||e.response||"":t}function v(t,e){var n=_e(),r=new XDomainRequest;if(r.onload=function(){return l._xdrOnLoad(r,t)},r.onerror=function(e){return l._onError(t,a(r),e)},n=n&&n.location&&n.location.protocol||"",l._senderConfig.endpointUrl().lastIndexOf(n,0))return l.diagLog().throwInternal(N.WARNING,V.TransmissionFailed,". Cannot send XDomain request. The endpoint URL protocol doesn't match the hosting page protocol."),void l._buffer.clear();n=l._senderConfig.endpointUrl().replace(/^(https?:)/,""),r.open("POST",n),n=l._buffer.batchPayloads(t),r.send(n),l._buffer.markAsSent(t)}function a(e,t){return e?"XDomainRequest,Response:"+Cr(e)||"":t}function y(e,t){var n=l.core[n="getNotifyMgr"]?l.core[n]():l.core._notificationManager;if(n&&n.eventsSendRequest)try{n.eventsSendRequest(e,t)}catch(r){l.diagLog().throwInternal(N.CRITICAL,V.NotificationException,"send request notification failed: "+me(r),{exception:Le(r)})}}l.pause=e,l.resume=e,l.flush=function(){try{l.triggerSend(!0,null,1)}catch(e){l.diagLog().throwInternal(N.CRITICAL,V.FlushFailed,"flush failed, telemetry will not be collected: "+me(e),{exception:Le(e)})}},l.onunloadFlush=function(){if(!1!==l._senderConfig.onunloadDisableBeacon()&&!1!==l._senderConfig.isBeaconApiDisabled()||!nt())l.flush();else try{l.triggerSend(!0,u,2)}catch(e){l.diagLog().throwInternal(N.CRITICAL,V.FailedToSendQueuedTelemetry,"failed to flush with beacon sender on page unload, telemetry will not be collected: "+me(e),{exception:Le(e)})}},l.teardown=e,l.addHeader=function(e,t){b[e]=t},l.initialize=function(e,t,n,r){o.initialize(e,t,n,r);var a=l._getTelCtx(),i=l.identifier;T=new dr(t.logger),C=null,I=0,l._sender=null,w=0,t=Tr._getDefaultAppInsightsChannelConfig(),l._senderConfig=Tr._getEmptyAppInsightsChannelConfig(),re(t,function(e,t){l._senderConfig[e]=function(){return a.getConfig(i,e,t())}}),l._buffer=l._senderConfig.enableSessionStorageBuffer()&&dt()?new Bn(l.diagLog(),l._senderConfig):new Dn(l._senderConfig),l._sample=new yr(l._senderConfig.samplingPercentage(),l.diagLog()),!$((t=e).disableInstrumentationKeyValidation)&&t.disableInstrumentationKeyValidation||/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/.test(t.instrumentationKey)||l.diagLog().throwInternal(N.CRITICAL,V.InvalidInstrumentationKey,"Invalid Instrumentation key "+e.instrumentationKey),!yt(l._senderConfig.endpointUrl())&&l._senderConfig.customHeaders()&&0<l._senderConfig.customHeaders().length&&ue(l._senderConfig.customHeaders(),function(e){x.addHeader(e.header,e.value)}),!l._senderConfig.isBeaconApiDisabled()&&nt()?l._sender=u:(e=xe("XMLHttpRequest"))?"withCredentials"in new e?(l._sender=c,l._XMLHttpRequestSupported=!0):typeof XDomainRequest!==_&&(l._sender=v):xe("fetch")&&(l._sender=d)},l.processTelemetry=function(e,n){n=l._getTelCtx(n);try{if(l._senderConfig.disableTelemetry())return;if(!e)return void n.diagLog().throwInternal(N.CRITICAL,V.CannotSendEmptyTelemetry,"Cannot send empty telemetry");if(e.baseData&&!e.baseType)return void n.diagLog().throwInternal(N.CRITICAL,V.InvalidEvent,"Cannot send telemetry without baseData and baseType");if(e.baseType||(e.baseType="EventData"),!l._sender)return void n.diagLog().throwInternal(N.CRITICAL,V.SenderNotInitialized,"Sender was not initialized");if(!l._sample.isSampledIn(e))return void n.diagLog().throwInternal(N.WARNING,V.TelemetrySampledAndNotSent,"Telemetry item was sampled out and not sent",{SampleRate:l._sample.sampleRate});e[at]=l._sample.sampleRate;var r=Tr.constructEnvelope(e,l._senderConfig.instrumentationKey(),n.diagLog());if(!r)return void n.diagLog().throwInternal(N.CRITICAL,V.CreateEnvelopeError,"Unable to create an AppInsights envelope");var a=!1;if(e.tags&&e.tags[it]&&(ue(e.tags[it],function(e){try{e&&!1===e(r)&&(a=!0,n.diagLog().warnToConsole("Telemetry processor check returns false"))}catch(t){n.diagLog().throwInternal(N.CRITICAL,V.TelemetryInitializerFailed,"One of telemetry initializers failed, telemetry item will not be sent: "+me(t),{exception:Le(t)},!0)}}),delete e.tags[it]),a)return;var t=T.serialize(r),i=l._buffer.getItems(),o=l._buffer.batchPayloads(i);o&&o.length+t.length>l._senderConfig.maxBatchSizeInBytes()&&l.triggerSend(!0,null,10),l._buffer.enqueue(t),g()}catch(s){n.diagLog().throwInternal(N.WARNING,V.FailedAddingTelemetryToBuffer,"Failed adding telemetry to the sender's buffer, some telemetry will be lost: "+me(s),{exception:Le(s)})}l.processNext(e,n)},l._xhrReadyStateChange=function(e,t,n){4===e.readyState&&i(e.status,t,e.responseURL,n,m(e),Cr(e)||e.response)},l.triggerSend=function(e,t,n){void 0===e&&(e=!0);try{l._senderConfig.disableTelemetry()?l._buffer.clear():0<l._buffer.count()&&(a=l._buffer.getItems(),y(n||0,e),t?t.call(x,a,e):l._sender(a,e)),clearTimeout(S),C=S=null}catch(i){(!(e=ae(r=((r=(r=void 0===r?null:r)?r:(a=Ae()||{})?(a.userAgent||"").toLowerCase():"")||"").toLowerCase(),"msie")?parseInt(r.split("msie")[1]):ae(r,we)&&(r=parseInt(r.split(we)[1]))?r+4:null)||9<e)&&l.diagLog().throwInternal(N.CRITICAL,V.TransmissionFailed,"Telemetry transmission failed, some telemetry will be lost: "+me(i),{exception:Le(i)})}var r,a},l._onError=function(e,t,n){l.diagLog().throwInternal(N.WARNING,V.OnError,"Failed to send telemetry.",{message:t}),l._buffer.clearSent(e)},l._onPartialSuccess=function(e,t){for(var n=[],r=[],a=0,i=t.errors.reverse();a<i.length;a++){var o=i[a],s=e.splice(o.index,1)[0];(h(o.statusCode)?r:n).push(s)}0<e.length&&l._onSuccess(e,t.itemsAccepted),0<n.length&&l._onError(n,m(null,["partial success",t.itemsAccepted,"of",t.itemsReceived].join(" "))),0<r.length&&(p(r),l.diagLog().throwInternal(N.WARNING,V.TransmissionFailed,"Partial success. Delivered: "+e.length+", Failed: "+n.length+". Will retry to send "+r.length+" our of "+t.itemsReceived+" items"))},l._onSuccess=function(e,t){l._buffer.clearSent(e)},l._xdrOnLoad=function(e,t){var n=Cr(e);!e||n+""!="200"&&""!==n?(n=f(n))&&n.itemsReceived&&n.itemsReceived>n.itemsAccepted&&!l._senderConfig.isRetryDisabled()?l._onPartialSuccess(t,n):l._onError(t,a(e)):(I=0,l._onSuccess(t,0))}}),x}e.Sender=qe,function(e,t,n){var r=Object.defineProperty;if(r)try{return r(e,t,n)}catch(a){}typeof n.value!==undefined&&(e[t]=n.value)}(e,"__esModule",{value:!0})};"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(((e="undefined"!=typeof globalThis?globalThis:e||self).Microsoft=e.Microsoft||{},e.Microsoft.ApplicationInsights=e.Microsoft.ApplicationInsights||{}));
//# sourceMappingURL=applicationinsights-channel-js.min.js.map
